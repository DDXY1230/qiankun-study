{"version":3,"file":"runtime-dom.global.js","sources":["../../shared/src/index.ts","../src/nodeOps.ts","../src/modules/style.ts","../src/modules/event.ts","../src/modules/class.ts","../src/modules/attr.ts","../src/patchProp.ts","../src/index.ts"],"sourcesContent":["export const isObject = (value) => typeof value == 'object' && value !== null; // 判断是否是对象\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = value => typeof value == 'function'\nexport const isNumber = value => typeof value == 'number'\nexport const isString = value => typeof value == 'string'\nexport const isIntegerKey = key => parseInt(key) + '' === key\n\nlet hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key)\nexport const hasChange = (oldValue, value) => oldValue !== value","export const nodeOps = {\n  // createElement, 不同的平台创建元素的方式不一样\n  // 元素\n  createElement: tagName => document.createElement(tagName),// 增加\n  remove: child => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child)\n    }\n  },\n  insert: (child, parent, anchor = null) => {\n    parent.insertBefore(child,anchor);\n  },\n  querySelector: selector => document.querySelector(selector),\n  setElementText: (el, text) => el.textContent = text,\n\n  //文本操作 \n  createText: text => document.createTextNode(text),\n  setText: (node, text) => node.nodeValue = text\n}","export const patchStyle = (el, prev, next) => {\n  const style = el.style // 获取样式\n  if (next == null) {\n    el.removeAttribute('style') // \n  } else {\n    // 老的里面新的有没有\n    if(prev) {\n      for(let key in prev) {\n        if(next[key] == null){// 老的有  新的没有  需要删除\n          style[key] = ''\n        } \n      }\n    }\n    // 新的里面需要赋值到style\n    for (let key in next) {\n      style[key] = next[key]\n    }\n  }\n}","export const patchEvent = (el, key, value) => {\n  // 对函数的缓存\n  const invokers = el.vei || (el._vei = {});\n  const exists = invokers[key]\n  if (value && exists) { // 需要绑定事件并且 新的事件value有值的情况下\n    exists.value = value\n  } else { // \n    const eventName = key.slice(2).toLowerCase();\n    if (value) {\n      // 以前没有绑定过 要绑定事件\n      let invoker = invokers[key] = createInvoker(value)\n      el.addEventListener(eventName, invoker)\n    } else { // 以前绑定了, 但是没有绑定值\n      el.removeEventListener(eventName, exists);\n      invokers[key] = undefined;\n\n    }\n  }\n}\nfunction createInvoker(value) {\n  const invoker = e => {\n    invoker.value(e)\n  }\n  invoker.value = value; // 为了能随时更改value属性\n  return invoker\n}","export const patchClass = (el,value) => {\n  if(value == null) {\n    value = ''\n  }\n  el.className = value\n}","export const patchAttr = (el, key, value) => {\n  if (value == null) {\n    el.removeAttribute(key)\n  } else {\n    el.setAttribute(key)\n  }\n}","// 一系列的属性操作\nimport { patchStyle } from './modules/style';\nimport { patchEvent } from './modules/event';\nimport { patchClass } from './modules/class';\nimport { patchAttr } from './modules/attr';\nexport const patchProp = (el, key, prevValue, nextValue) => {\n  switch(key) {\n    case 'class':\n      patchClass(el,nextValue);\n      break;\n    case 'style':\n      patchStyle(el, prevValue, nextValue)\n      break;\n    // case 'attr':\n    //   break;\n    // case 'events':\n    //   break\n    default: \n    if(/^on[^a-z]/.test(key)) { // 事件\n      patchEvent(el,key,nextValue)\n    }else { // 属性\n      patchAttr(el,key,nextValue)\n    }\n  }\n}","import { extend } from '@vue/shared';\nimport {\n  nodeOps\n} from './nodeOps' // 对象\nimport {\n  patchProp\n} from './patchProp' // 方法\n\nconst renderOption = extend({ patchProp }, nodeOps)\nexport {\n  renderOption\n}"],"names":[],"mappings":"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"}