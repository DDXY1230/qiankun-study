{"version":3,"file":"runtime-dom.esm-bundler.js","sources":["../../shared/src/index.ts","../src/nodeOps.ts","../src/modules/style.ts","../src/modules/event.ts","../src/modules/class.ts","../src/modules/attr.ts","../src/patchProp.ts","../../runtime-core/src/renderer.ts","../src/index.ts"],"sourcesContent":["export const isObject = (value) => typeof value == 'object' && value !== null; // 判断是否是对象\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = value => typeof value == 'function'\nexport const isNumber = value => typeof value == 'number'\nexport const isString = value => typeof value == 'string'\nexport const isIntegerKey = key => parseInt(key) + '' === key\n\nlet hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key)\nexport const hasChange = (oldValue, value) => oldValue !== value","export const nodeOps = {\n  // createElement, 不同的平台创建元素的方式不一样\n  // 元素\n  createElement: tagName => document.createElement(tagName),// 增加\n  remove: child => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child)\n    }\n  },\n  insert: (child, parent, anchor = null) => {\n    parent.insertBefore(child,anchor);\n  },\n  querySelector: selector => document.querySelector(selector),\n  setElementText: (el, text) => el.textContent = text,\n\n  //文本操作 \n  createText: text => document.createTextNode(text),\n  setText: (node, text) => node.nodeValue = text\n}","export const patchStyle = (el, prev, next) => {\n  const style = el.style // 获取样式\n  if (next == null) {\n    el.removeAttribute('style') // \n  } else {\n    // 老的里面新的有没有\n    if(prev) {\n      for(let key in prev) {\n        if(next[key] == null){// 老的有  新的没有  需要删除\n          style[key] = ''\n        } \n      }\n    }\n    // 新的里面需要赋值到style\n    for (let key in next) {\n      style[key] = next[key]\n    }\n  }\n}","export const patchEvent = (el, key, value) => {\n  // 对函数的缓存\n  const invokers = el.vei || (el._vei = {});\n  const exists = invokers[key]\n  if (value && exists) { // 需要绑定事件并且 新的事件value有值的情况下\n    exists.value = value\n  } else { // \n    const eventName = key.slice(2).toLowerCase();\n    if (value) {\n      // 以前没有绑定过 要绑定事件\n      let invoker = invokers[key] = createInvoker(value)\n      el.addEventListener(eventName, invoker)\n    } else { // 以前绑定了, 但是没有绑定值\n      el.removeEventListener(eventName, exists);\n      invokers[key] = undefined;\n\n    }\n  }\n}\nfunction createInvoker(value) {\n  const invoker = e => {\n    invoker.value(e)\n  }\n  invoker.value = value; // 为了能随时更改value属性\n  return invoker\n}","export const patchClass = (el,value) => {\n  if(value == null) {\n    value = ''\n  }\n  el.className = value\n}","export const patchAttr = (el, key, value) => {\n  if (value == null) {\n    el.removeAttribute(key)\n  } else {\n    el.setAttribute(key)\n  }\n}","// 一系列的属性操作\nimport { patchStyle } from './modules/style';\nimport { patchEvent } from './modules/event';\nimport { patchClass } from './modules/class';\nimport { patchAttr } from './modules/attr';\nexport const patchProp = (el, key, prevValue, nextValue) => {\n  switch(key) {\n    case 'class':\n      patchClass(el,nextValue);\n      break;\n    case 'style':\n      patchStyle(el, prevValue, nextValue)\n      break;\n    // case 'attr':\n    //   break;\n    // case 'events':\n    //   break\n    default: \n    if(/^on[^a-z]/.test(key)) { // 事件\n      patchEvent(el,key,nextValue)\n    }else { // 属性\n      patchAttr(el,key,nextValue)\n    }\n  }\n}","export function createRenderer (rendererOption) {// 告诉core  怎么渲染\n  return {\n    createApp(rootComponent, rootProps) {\n      const app = {\n        mount(container) { // 挂载到哪里去\n          console.log('渲染的参数',container, rootComponent, rootProps,rendererOption)\n        }\n      }\n      return app\n    }\n  }\n}","import { extend } from '@vue/shared';\nimport { nodeOps } from './nodeOps' // 对象\nimport { patchProp } from './patchProp' // 方法\nimport {createRenderer} from '@vue/runtime-core'\n\nconst rendererOption = extend({ patchProp }, nodeOps)\n\nexport function createApp(rootComponent, rootProps = null) {\n  const app = createRenderer(rendererOption).createApp(rootComponent, rootProps)\n  let {mount} = app\n  app.mount = function (container) { // 重写mount\n    // 清空容器的操作\n    container = nodeOps.querySelector(container)\n    container.innerHTML = ''\n    // 将组建渲染成dom元素 进行挂载\n    mount(container)\n  }\n  return app;\n}\n// export {\n//   rendererOption\n// }"],"names":[],"mappings":"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"}