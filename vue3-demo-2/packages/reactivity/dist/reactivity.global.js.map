{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["export const isObject = (value) => typeof value == 'object' && value !== null; // 判断是否是对象\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = value => typeof value == 'function'\nexport const isNumber = value => typeof value == 'number'\nexport const isString = value => typeof value == 'string'\nexport const isIntegerKey = key => parseInt(key) + '' === key\n\nlet hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key)\nexport const hasChange = (oldValue, value) => oldValue !== value","import { isArray, isIntegerKey } from '@vue/shared';\nimport { TriggerOrTypes } from './operators';\nexport function effect(fn, options: any = {}) {\n  // 目的是我需要让这个effect变成响应式的effects, 可以做到数据变化重新执行\n  const effect = createReactiveEffect(fn, options);\n  if (!options.lazy) {\n    effect(); // 响应式的effect默认会先执行一次\n  }\n  return effect;\n}\nlet uid = 0\nlet activeEffect // 存储当前的effect\nconst effectStack = []\nfunction createReactiveEffect(fn, options) {\n  const effect = function reactiveEffect() {\n    if (!effectStack.includes(effect)) { // 保证effect没有加入effectStack中 才能加\n      try {\n        // console.log('默认会先执行一次')\n        effectStack.push(effect)\n        activeEffect = effect\n        console.log('================>',fn)\n        return fn()// 函数执行的时候,会走get方法\n      } finally {\n        effectStack.pop()\n        activeEffect = effectStack[effectStack.length - 1]\n      }\n    }\n  }\n  effect.id = uid++; // 制作一个effect标识, 用于区分effect\n  effect._isEffect = true; // 用于标识这个是响应式effect\n  effect.raw = fn;// 保留effect对应的原函数\n  effect.options = options;// 在effect上面保存用户的属性\n  return effect\n}\nconst targetMap = new WeakMap()\nexport function track(target, type, key) { // 可以拿到当前的effect\n  // activeEffect // 当前的正在运行的effect\n  // console.log(target,key,activeEffect)\n  if (activeEffect === undefined) { //此属性不用收集, 因为没有在effect中使用\n    return\n  }\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()))\n  }\n  let dep = depsMap.get(key)\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()))\n  }\n  if (!dep.has(activeEffect)) {\n    dep.add(activeEffect)\n  }\n  console.log('依赖', targetMap)\n}\nexport function trigger(target, type, key?, newValue?, oldValue?) {\n  console.log('修改新增调用trigger', target, type, key, newValue, oldValue)\n  const depsMap = targetMap.get(target)\n  console.log('depsMap', depsMap)\n  if (!depsMap) {\n    return\n  }\n  const effects = new Set()\n  const add = effectToAdd => {\n    console.log('effectToAdd', effectToAdd)\n    if (effectToAdd) {\n      effectToAdd.forEach(effect => effects.add(effect))\n    }\n  }\n  if (key == 'length' && isArray(target)) {\n    depsMap.forEach((dep, key) => {\n      console.log(depsMap, dep, key)\n      if (key === 'length' || key > newValue) {\n        add(dep)\n      }\n    })\n  } else {\n    // 可能是对象\n    if (key !== undefined) {// 这里是修改,不能还是新增\n    console.log('-------------key', key)\n    console.log('-------------key', depsMap.get(key))\n      add(depsMap.get(key)) // \n    }\n    // 如果修改数组中的某一个索引\n    switch (type) {\n      case TriggerOrTypes.ADD:\n        if (isArray(target) && isIntegerKey(key)) {\n          add(depsMap.get('length'))\n        }\n    }\n  }\n  console.log('====================>', effects)\n  effects.forEach((effect: any) => effect())\n}","import { track, trigger } from './effect';\nimport { isObject, extend,isArray,isIntegerKey,hasOwn,hasChange } from '@vue/shared';\nimport { readonly, reactive } from './reactive';\nimport { TrackOpTypes,TriggerOrTypes } from './operators';\n// 只读的属性set会被报异常\n// 是不是深度\n\nconst get = createGetter();\nconst shallowGet = createGetter(false, true);\nconst readonlyGet = createGetter(true);\nconst shallowReadonlyGet = createGetter(true, true);\n\nconst set = createSetter(false)\nconst shallowSet = createSetter(true)\n\n\nfunction createGetter(isReadonly = false, shallow = false) { // 拦截获取功能\n  return function get(target, key, receiver) {\n    const res = Reflect.get(target, key, receiver) // target[key]\n    if (!isReadonly) {\n      // 不是只读, 收集依赖,等会数据变化后更新对应的视图\n      console.log('取值, 收集依赖')\n      track(target, TrackOpTypes.GET, key)\n    }\n    if (shallow) {\n      return res;\n    }\n    if (isObject(res)) { // vue2是一上来就递归, vue2是当取值的时候进行代理,vue3的代理模式是懒代理\n      return isReadonly ? readonly(res) : reactive(res)\n    }\n\n    return res\n  }\n}\nfunction createSetter(shallow = false) { // 拦截设置功能\n  return function set(target, key, value, receiver) {\n    console.log('设置', target, key, value, receiver)\n    const oldValue = target[key]\n    console.log('oldValue', oldValue)\n    let hasKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target,key)\n\n\n    \n    const result = Reflect.set(target, key, value, receiver) // target[key] = value\n\n    if(!hasKey) {\n      // 新增\n      console.log('新增')\n      trigger(target, TriggerOrTypes.ADD, key, value)\n    }else if(hasChange(oldValue, value) ) {\n      // 修改\n      console.log('修改')\n      trigger(target, TriggerOrTypes.SET, key, value, oldValue)\n    }\n\n    // 当数据更新 通知对应属性的effect重新执行\n    // 我们区分是新增的 还是修改的 vue2里面无法监控索引更改, 无法控制数组的长度\n\n    return result\n  }\n}\n\nlet readonlyObj = {\n  set: (target, key) => {\n    console.error(`set on key ${key} falied, beacause key is readonly attr`)\n  }\n}\n\nexport const mutableHandlers = {\n  get,\n  set\n}\nexport const shallowReactiveHandlers = {\n  get: shallowGet,\n  set: shallowSet\n}\nexport const readonlyHandlers = extend({\n  get: readonlyGet,\n}, readonlyObj)\nexport const shallowReadonlyHandlers = extend({\n  get: shallowReadonlyGet,\n}, readonlyObj)","import { isObject } from '@vue/shared';\n\nimport {\n  mutableHandlers,\n  shallowReactiveHandlers,\n  readonlyHandlers, \n  shallowReadonlyHandlers\n} from './baseHandlers'\n\nexport function reactive(target) {\n  return createReactiveObject(target, false, mutableHandlers, false)\n}\nexport function shallowReactive(target) {\n  return createReactiveObject(target, false, shallowReactiveHandlers, true)\n}\nexport function readonly(target) {\n  return createReactiveObject(target, true, readonlyHandlers, false)\n\n}\nexport function shallowReadonly(target) {\n  return createReactiveObject(target, true, shallowReadonlyHandlers, true)\n}\n// 是不是只读   是不是深度\nconst reactiveMap = new WeakMap() // WeakMap 会自动垃圾回收, 不会造成内存泄漏,存储的key必须是对象\nconst readonlyMap = new WeakMap() // \n\nexport function createReactiveObject(target, isReadonly, baseHandlers, isShallow) {\n  // 如果目标不是对象, 没法拦截了, reactive这个api只能用来拦截对象类型\n  if (!isObject(target)) {\n    return target;\n  }\n  // 如果某个对象被代理了就不需要被再次代理 可能一个对象被代理一次,又被只读代理\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\n  // 判断之前是否存在过代理\n  const existProxy = proxyMap.get(target);\n  if (existProxy) {\n    return existProxy // 如果存在代理过  返回代理的对象即可\n  }\n  const proxy = new Proxy(target, baseHandlers)\n  proxyMap.set(target, proxy); // 将要代理的对象 和 对应代理结果缓存起来\n  return proxy\n}\n","import { isObject, hasChange, isArray } from '@vue/shared';\nimport { track, trigger } from \"./effect\";\nimport { TrackOpTypes, TriggerOrTypes } from \"./operators\";\nimport { reactive } from './reactive'\n\nexport function ref(value) {\n  // value是一个普通类型\n  return createRef(value)\n}\nexport function shallowRef(value) {\n  return createRef(value, true)\n}\nfunction createRef(rawValue, shallow = false) {\n  // rawValue也可以是对象,但是一般情况对象直接使用reactive更合理\n  return new RefImpl(rawValue, shallow)\n}\nclass RefImpl {\n  public _value; // 表示声明了_value属性, 但是没有赋值\n  public __v_isRef = true; // 表示是一个ref属性\n  constructor(public rawValue, public shallow) { // 这样写表示此属性放在了实例上了\n    this._value = shallow ? rawValue : convert(rawValue)\n  }\n  // 类的属性访问器\n  get value() {// 代理 取值value会代理到_value\n    track(this, TrackOpTypes.GET, 'value')\n    return this._value\n  }\n  set value(newValue) {\n    if (hasChange(newValue, this.rawValue)) {\n      // 判断老值和新值是否有变化\n      this.rawValue = newValue\n      this._value = this.shallow ? newValue : convert(newValue)\n      trigger(this, TriggerOrTypes.SET, 'value', newValue)\n    }\n  }\n}\nconst convert = val => isObject(val) ? reactive(val) : val\n\n\n\nexport function toRef(target, key) {\n  return new ObjectRefImp(target, key)\n}\nexport function toRefs(object) { // object可能是对象也可能是数组\n  const ret = isArray(object) ? new Array(object.length) : {}\n  for (let key in object) {\n    ret[key] = toRef(object, key)\n  }\n  return ret;\n\n}\nclass ObjectRefImp {\n  public __v_isRef = true;\n  constructor(public target, public key) {\n\n  }\n  get value() {\n    return this.target[this.key]\n  }\n  set value(newValue) {\n    this.target[this.key] = newValue\n  }\n}\n/* \nref 和 reactive 的区别:\nreactive内部采用的是proxy  \nref内部使用的是defineProperty\n */","import { isFunction } from '@vue/shared/src';\nimport { effect, track, trigger } from './effect';\nimport { TrackOpTypes, TriggerOrTypes } from './operators';\n// vue2  vue3原理不一样\nclass ComputedRefImpl {\n  public _dirty = true; // 默认取值时不要有缓存\n  public _value;\n  public effect;\n  constructor(public getter, public setter) { // 在ts中默认不会挂在this上,但是加上public就可以挂在this上面了\n    // 计算属性默认会产生一个effect\n    this.effect = effect(getter, {\n      lazy: true, // 默认不执行\n      scheduler: () => {\n        if (!this._dirty) {\n          this._dirty = true\n          trigger(this,TriggerOrTypes.SET,'value')\n        }\n      }\n    })\n\n  }\n  get value() {// 计算属性也要收集依赖\n    if (this._dirty) {\n      this._value = this.effect()\n      this._dirty = false\n    }\n    track(this, TrackOpTypes.GET, 'value')\n    return this._value\n  }\n  set value(newValue) {\n    this.setter(newValue)\n  }\n}\nexport function computed(getterOrOptions) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n    setter = () => {\n      console.warn('computed value must be readonly!')\n    }\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  return new ComputedRefImpl(getter, setter)\n}"],"names":[],"mappings":";;;EAAO,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,OAAO,KAAK,IAAI,QAAQ,IAAI,KAAK,KAAK,IAAI,CAAC;EACvE,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA;EAC5B,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAA;EAC7B,MAAM,UAAU,GAAG,KAAK,IAAI,OAAO,KAAK,IAAI,UAAU,CAAA;EAGtD,MAAM,YAAY,GAAG,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,CAAA;EAE7D,IAAI,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAA;EAC7C,MAAM,MAAM,GAAG,CAAC,MAAM,EAAE,GAAG,KAAK,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;EAChE,MAAM,SAAS,GAAG,CAAC,QAAQ,EAAE,KAAK,KAAK,QAAQ,KAAK,KAAK;;WCRhD,MAAM,CAAC,EAAE,EAAE,UAAe,EAAE,EAAA;;MAE1C,MAAM,MAAM,GAAG,oBAAoB,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;EACjD,IAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;UACjB,MAAM,EAAE,CAAC;EACV,KAAA;EACD,IAAA,OAAO,MAAM,CAAC;EAChB,CAAC;EACD,IAAI,GAAG,GAAG,CAAC,CAAA;EACX,IAAI,YAAY,CAAA;EAChB,MAAM,WAAW,GAAG,EAAE,CAAA;EACtB,SAAS,oBAAoB,CAAC,EAAE,EAAE,OAAO,EAAA;MACvC,MAAM,MAAM,GAAG,SAAS,cAAc,GAAA;UACpC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;cACjC,IAAI;;EAEF,gBAAA,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;kBACxB,YAAY,GAAG,MAAM,CAAA;EACrB,gBAAA,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAC,EAAE,CAAC,CAAA;EACnC,gBAAA,OAAO,EAAE,EAAE,CAAA;EACZ,aAAA;EAAS,oBAAA;kBACR,WAAW,CAAC,GAAG,EAAE,CAAA;kBACjB,YAAY,GAAG,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;EACnD,aAAA;EACF,SAAA;EACH,KAAC,CAAA;EACD,IAAA,MAAM,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC;EAClB,IAAA,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;EACxB,IAAA,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC;EAChB,IAAA,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;EACzB,IAAA,OAAO,MAAM,CAAA;EACf,CAAC;EACD,MAAM,SAAS,GAAG,IAAI,OAAO,EAAE,CAAA;WACf,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAA;;;EAGrC,IAAA,IAAI,YAAY,KAAK,SAAS,EAAE;UAC9B,OAAM;EACP,KAAA;MACD,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;MACnC,IAAI,CAAC,OAAO,EAAE;EACZ,QAAA,SAAS,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;EAC7C,KAAA;MACD,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;MAC1B,IAAI,CAAC,GAAG,EAAE;EACR,QAAA,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;EACpC,KAAA;EACD,IAAA,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;EAC1B,QAAA,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACtB,KAAA;EACD,IAAA,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAA;EAC9B,CAAC;EACK,SAAU,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,GAAI,EAAE,QAAS,EAAE,QAAS,EAAA;EAC9D,IAAA,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAA;MACnE,MAAM,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;EACrC,IAAA,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;MAC/B,IAAI,CAAC,OAAO,EAAE;UACZ,OAAM;EACP,KAAA;EACD,IAAA,MAAM,OAAO,GAAG,IAAI,GAAG,EAAE,CAAA;EACzB,IAAA,MAAM,GAAG,GAAG,WAAW,IAAG;EACxB,QAAA,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,WAAW,CAAC,CAAA;EACvC,QAAA,IAAI,WAAW,EAAE;EACf,YAAA,WAAW,CAAC,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAA;EACnD,SAAA;EACH,KAAC,CAAA;MACD,IAAI,GAAG,IAAI,QAAQ,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE;UACtC,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,KAAI;cAC3B,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;EAC9B,YAAA,IAAI,GAAG,KAAK,QAAQ,IAAI,GAAG,GAAG,QAAQ,EAAE;kBACtC,GAAG,CAAC,GAAG,CAAC,CAAA;EACT,aAAA;EACH,SAAC,CAAC,CAAA;EACH,KAAA;EAAM,SAAA;;EAEL,QAAA,IAAI,GAAG,KAAK,SAAS,EAAE;EACvB,YAAA,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAA;EACpC,YAAA,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAA;cAC/C,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAA;EACtB,SAAA;;EAED,QAAA,QAAQ,IAAI;EACV,YAAA,KAAA,CAAA;kBACE,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,EAAE;sBACxC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;EAC3B,iBAAA;EACJ,SAAA;EACF,KAAA;EACD,IAAA,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,OAAO,CAAC,CAAA;MAC7C,OAAO,CAAC,OAAO,CAAC,CAAC,MAAW,KAAK,MAAM,EAAE,CAAC,CAAA;EAC5C;;ECxFA;EACA;EAEA,MAAM,GAAG,GAAG,YAAY,EAAE,CAAC;EAC3B,MAAM,UAAU,GAAG,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;EAC7C,MAAM,WAAW,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;EACvC,MAAM,kBAAkB,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EAEpD,MAAM,GAAG,GAAG,YAAY,CAAC,KAAK,CAAC,CAAA;EAC/B,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,CAAA;EAGrC,SAAS,YAAY,CAAC,UAAU,GAAG,KAAK,EAAE,OAAO,GAAG,KAAK,EAAA;EACvD,IAAA,OAAO,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAA;EACvC,QAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAA;UAC9C,IAAI,CAAC,UAAU,EAAE;;EAEf,YAAA,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;EACvB,YAAA,KAAK,CAAC,MAAM,EAAoB,CAAA,yBAAA,GAAG,CAAC,CAAA;EACrC,SAAA;EACD,QAAA,IAAI,OAAO,EAAE;EACX,YAAA,OAAO,GAAG,CAAC;EACZ,SAAA;EACD,QAAA,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;EACjB,YAAA,OAAO,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;EAClD,SAAA;EAED,QAAA,OAAO,GAAG,CAAA;EACZ,KAAC,CAAA;EACH,CAAC;EACD,SAAS,YAAY,CAAC,OAAO,GAAG,KAAK,EAAA;MACnC,OAAO,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAA;EAC9C,QAAA,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;EAC/C,QAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;EAC5B,QAAA,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;EACjC,QAAA,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,EAAC,GAAG,CAAC,CAAA;EAIpG,QAAA,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;UAExD,IAAG,CAAC,MAAM,EAAE;;EAEV,YAAA,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;EACjB,YAAA,OAAO,CAAC,MAAM,EAAA,CAAA,2BAAsB,GAAG,EAAE,KAAK,CAAC,CAAA;EAChD,SAAA;EAAK,aAAA,IAAG,SAAS,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAG;;EAEpC,YAAA,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;cACjB,OAAO,CAAC,MAAM,EAAsB,CAAA,2BAAA,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;EAC1D,SAAA;;;EAKD,QAAA,OAAO,MAAM,CAAA;EACf,KAAC,CAAA;EACH,CAAC;EAED,IAAI,WAAW,GAAG;EAChB,IAAA,GAAG,EAAE,CAAC,MAAM,EAAE,GAAG,KAAI;EACnB,QAAA,OAAO,CAAC,KAAK,CAAC,cAAc,GAAG,CAAA,sCAAA,CAAwC,CAAC,CAAA;OACzE;GACF,CAAA;EAEM,MAAM,eAAe,GAAG;MAC7B,GAAG;MACH,GAAG;GACJ,CAAA;EACM,MAAM,uBAAuB,GAAG;EACrC,IAAA,GAAG,EAAE,UAAU;EACf,IAAA,GAAG,EAAE,UAAU;GAChB,CAAA;EACM,MAAM,gBAAgB,GAAG,MAAM,CAAC;EACrC,IAAA,GAAG,EAAE,WAAW;GACjB,EAAE,WAAW,CAAC,CAAA;EACR,MAAM,uBAAuB,GAAG,MAAM,CAAC;EAC5C,IAAA,GAAG,EAAE,kBAAkB;GACxB,EAAE,WAAW,CAAC;;ECxET,SAAU,QAAQ,CAAC,MAAM,EAAA;MAC7B,OAAO,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,eAAsB,CAAC,CAAA;EACpE,CAAC;EACK,SAAU,eAAe,CAAC,MAAM,EAAA;MACpC,OAAO,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,uBAA6B,CAAC,CAAA;EAC3E,CAAC;EACK,SAAU,QAAQ,CAAC,MAAM,EAAA;MAC7B,OAAO,oBAAoB,CAAC,MAAM,EAAE,IAAI,EAAE,gBAAuB,CAAC,CAAA;EAEpE,CAAC;EACK,SAAU,eAAe,CAAC,MAAM,EAAA;MACpC,OAAO,oBAAoB,CAAC,MAAM,EAAE,IAAI,EAAE,uBAA6B,CAAC,CAAA;EAC1E,CAAC;EACD;EACA,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;EACjC,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;EAE3B,SAAU,oBAAoB,CAAC,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,SAAS,EAAA;;EAE9E,IAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;EACrB,QAAA,OAAO,MAAM,CAAC;EACf,KAAA;;MAED,MAAM,QAAQ,GAAG,UAAU,GAAG,WAAW,GAAG,WAAW,CAAA;;MAEvD,MAAM,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EACxC,IAAA,IAAI,UAAU,EAAE;UACd,OAAO,UAAU,CAAA;EAClB,KAAA;MACD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,YAAY,CAAC,CAAA;MAC7C,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;EAC5B,IAAA,OAAO,KAAK,CAAA;EACd;;ECpCM,SAAU,GAAG,CAAC,KAAK,EAAA;;EAEvB,IAAA,OAAO,SAAS,CAAC,KAAK,CAAC,CAAA;EACzB,CAAC;EACK,SAAU,UAAU,CAAC,KAAK,EAAA;EAC9B,IAAA,OAAO,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;EAC/B,CAAC;EACD,SAAS,SAAS,CAAC,QAAQ,EAAE,OAAO,GAAG,KAAK,EAAA;;EAE1C,IAAA,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;EACvC,CAAC;EACD,MAAM,OAAO,CAAA;EAGQ,IAAA,QAAA,CAAA;EAAiB,IAAA,OAAA,CAAA;MAF7B,MAAM,CAAC;EACP,IAAA,SAAS,GAAG,IAAI,CAAC;MACxB,WAAmB,CAAA,QAAQ,EAAS,OAAO,EAAA;UAAxB,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAA;UAAS,IAAO,CAAA,OAAA,GAAP,OAAO,CAAA;EACzC,QAAA,IAAI,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;OACrD;;EAED,IAAA,IAAI,KAAK,GAAA;EACP,QAAA,KAAK,CAAC,IAAI,EAAoB,CAAA,yBAAA,OAAO,CAAC,CAAA;UACtC,OAAO,IAAI,CAAC,MAAM,CAAA;OACnB;MACD,IAAI,KAAK,CAAC,QAAQ,EAAA;UAChB,IAAI,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;;EAEtC,YAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;EACxB,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;EACzD,YAAA,OAAO,CAAC,IAAI,EAAA,CAAA,2BAAsB,OAAO,EAAE,QAAQ,CAAC,CAAA;EACrD,SAAA;OACF;EACF,CAAA;EACD,MAAM,OAAO,GAAG,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAA;EAI1C,SAAA,KAAK,CAAC,MAAM,EAAE,GAAG,EAAA;EAC/B,IAAA,OAAO,IAAI,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;EACtC,CAAC;EACK,SAAU,MAAM,CAAC,MAAM,EAAA;MAC3B,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAA;EAC3D,IAAA,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;UACtB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;EAC9B,KAAA;EACD,IAAA,OAAO,GAAG,CAAC;EAEb,CAAC;EACD,MAAM,YAAY,CAAA;EAEG,IAAA,MAAA,CAAA;EAAe,IAAA,GAAA,CAAA;MAD3B,SAAS,GAAG,IAAI,CAAC;MACxB,WAAmB,CAAA,MAAM,EAAS,GAAG,EAAA;UAAlB,IAAM,CAAA,MAAA,GAAN,MAAM,CAAA;UAAS,IAAG,CAAA,GAAA,GAAH,GAAG,CAAA;OAEpC;EACD,IAAA,IAAI,KAAK,GAAA;UACP,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OAC7B;MACD,IAAI,KAAK,CAAC,QAAQ,EAAA;UAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAA;OACjC;EACF,CAAA;EACD;;;;EAIG;;EChEH;EACA,MAAM,eAAe,CAAA;EAIA,IAAA,MAAA,CAAA;EAAe,IAAA,MAAA,CAAA;EAH3B,IAAA,MAAM,GAAG,IAAI,CAAC;EACd,IAAA,MAAM,CAAC;EACP,IAAA,MAAM,CAAC;MACd,WAAmB,CAAA,MAAM,EAAS,MAAM,EAAA;UAArB,IAAM,CAAA,MAAA,GAAN,MAAM,CAAA;UAAS,IAAM,CAAA,MAAA,GAAN,MAAM,CAAA;;EAEtC,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE;EAC3B,YAAA,IAAI,EAAE,IAAI;cACV,SAAS,EAAE,MAAK;EACd,gBAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;EAChB,oBAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;EAClB,oBAAA,OAAO,CAAC,IAAI,EAAoB,CAAA,2BAAA,OAAO,CAAC,CAAA;EACzC,iBAAA;eACF;EACF,SAAA,CAAC,CAAA;OAEH;EACD,IAAA,IAAI,KAAK,GAAA;UACP,IAAI,IAAI,CAAC,MAAM,EAAE;EACf,YAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;EAC3B,YAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;EACpB,SAAA;EACD,QAAA,KAAK,CAAC,IAAI,EAAoB,CAAA,yBAAA,OAAO,CAAC,CAAA;UACtC,OAAO,IAAI,CAAC,MAAM,CAAA;OACnB;MACD,IAAI,KAAK,CAAC,QAAQ,EAAA;EAChB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;OACtB;EACF,CAAA;EACK,SAAU,QAAQ,CAAC,eAAe,EAAA;EACtC,IAAA,IAAI,MAAM,CAAC;EACX,IAAA,IAAI,MAAM,CAAC;EACX,IAAA,IAAI,UAAU,CAAC,eAAe,CAAC,EAAE;UAC/B,MAAM,GAAG,eAAe,CAAC;UACzB,MAAM,GAAG,MAAK;EACZ,YAAA,OAAO,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAA;EAClD,SAAC,CAAA;EACF,KAAA;EAAM,SAAA;EACL,QAAA,MAAM,GAAG,eAAe,CAAC,GAAG,CAAC;EAC7B,QAAA,MAAM,GAAG,eAAe,CAAC,GAAG,CAAC;EAC9B,KAAA;EACD,IAAA,OAAO,IAAI,eAAe,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;EAC5C;;;;;;;;;;;;;;;;;;;"}